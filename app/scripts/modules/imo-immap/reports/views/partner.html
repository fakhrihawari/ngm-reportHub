<style>
	.collection.with-header .collection-item.avatar {
		padding-left: 51 !important;
	}
	.editable-wrap{
		width: 100%;
	}
		.border-radius {
		border-radius: 6px;
		border: 1px solid #dadce0;
		box-shadow: none;
	}
	.card .border-radius {
		min-height: 200px;
	}

	.card .card-image {
		height: 150px;
	}

	.card .card-image img {
		/* height: 100%;
		width: auto; */
		width: 100%;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
	}

	.card .card-reveal {
		padding: 0;
	}

	.card .card-content {
		padding-left: 10px;
		padding-right: 10px;
	}
	.line {
		display: inline-block;
	}
.card-reveal	.line {
		display: inline-block;
		padding-left: 21%;
		margin-top: 15%;
	}
	.collection .collection-item.avatar {
		min-height: 0;
	}
		.collection .collection-item.avatar i.circle {
		line-height: 30px;
		width: 30px;
		height: 30px;
		margin-top: 0px;
	}
	.collection .collection-item.avatar .secondary-content.file-upload{
		top: 6px;
	}
	.btn-floating.watch-detail{
		width: 30px;
    height: 30px;
	}
	.btn-floating.watch-detail i{
		font-size: 1.3rem;
    line-height: 30px;
	}
		.icon i{
		/* width: 2rem; */
    font-size: 1.6rem;
    line-height: 20px;
    display: block;
    float: left;
    /* text-align: center; */
    margin-right: 10px;
	}

</style>
<div id="close-preview-file" class="modal ">
	<div class="modal-content">
		<div>
			<iframe ng-src={{ngmClusterDocument.setLink()}} style="width:600px; height:500px;" frameborder="0"></iframe>
		</div>
	</div>
	<div class="modal-footer">
		<a class=" modal-action modal-close waves-effect waves-green btn-flat">{{'close_mayus1'|translate}}</a>
	</div>
</div>
<div id="remove-modal" class="modal">
	<div class="modal-content">
		<div class="center">
			<i class="medium material-icons" style="color:#f44336">delete</i>
			<h5 style="font-weight:300;"> {{'remove_this_file'|translate}}</h5>
		</div>

	</div>
	<div class="modal-footer">
		<a class=" modal-action modal-close waves-effect waves-green btn-flat">{{'close_mayus1'|translate}}</a>
		<!-- <a ng-click="ngmClusterDocument.removeFile()" class="modal-action modal-close waves-effect waves-green btn-flat">{{'yes_remove_this_file'|translate}}</a> -->
		<a ng-click="ngmClusterDocument.removeFileWithoutBroadcast();report.removeFile()" class="modal-action modal-close waves-effect waves-green btn-flat">{{'yes_remove_this_file'|translate}}</a>
	</div>
</div>
<div style="padding-left: 20px;">
	<table class="bordered responsive-table" style="margin-bottom:10px;" ng-show="report.imo_report.support_partner.length">
		<tr style="font-weight: 600;">
			<td>File</td>
			<td>Partner Category</td>
			<td>Partner</td>
			<td>Area of Activity</td>
			<!-- <td>Narative of Activity</td> -->
			<td>Products</td>
			<td>Colaboration With</td>
			<td>Number of Products</td>
			<td ng-if="report.definition.project_status !== 'complete'">{{'edit' | translate}}</td>
		</tr>

		<tr ng-repeat-start="partner in report.imo_report.support_partner track by $index" ng-init="$partnerIndex=$index" style="border: 0px">
			<!-- Start here -->
			<!-- <td>
				<span ng-if="!partner.fileid">
					<button class="btn" ng-click="report.uploadDocument.openModal('upload-file');report.setRowFileId($index)"> UPLOAD</button>
				</span>
				<span ng-if="partner.fileid">
					<div ng-bind="partner.fileid"></div>
					<button class="btn-floating  wave-effect blue tooltipped-upload" data-position="bottom" data-tooltip="{{'preview'|translate}}"
					 ng-disabled="item.filename_extension === '.csv'" ng-click="ngmClusterDocument.openPreview('close-preview-file',partner.fileid)">
						<i class="small material-icons">compare</i>
					</button>
				</span>
			</td> -->
			<td>
				<span>
					<button class="btn" ng-click="report.uploadDocument.openModal('upload-file');report.setRowFileId($index)" ng-disabled="!imoform.$visible"> UPLOAD</button>
				</span>
			</td>
			<!-- <td>
				<span e-form="imoform" 
					e-name="category_id" 
					editable-select="partner.category_id" 
					e-placeholder="{{'select'|translate}}"
					e-ng-options="a_t.id as a_t.name for a_t in report.partnerCategory"
					 e-ng-disabled="!partner.file.length"
					>
					{{report.displayPartnerCategory(report,$data,partner)}}
				</span>
			</td> -->
			<td>
				<span e-form="imoform" 
					e-name="category_id" 
					editable-select="partner.partner_category_id" 
					e-placeholder="{{'select'|translate}}"
					e-ng-options="a_t.id as a_t.name for a_t in report.partnerCategory"
					 e-ng-disabled="!partner.file.length"
					>
					{{report.displayPartnerCategory(report,$data,partner)}}
				</span>
			</td>
			<td>
				<span e-form="imoform" 
					e-name="partner_id" 
					editable-select="partner.partner_id" 
					e-placeholder="{{'select'|translate}}"
					e-ng-options="a_t.id as a_t.name for a_t in report.partner  | filter: {category_id:partner.partner_category_id}"
					e-ng-disabled="!partner.partner_category_id"
					>
					{{report.displayPartner(report,$data,partner)}}
				</span>
			</td>
			<!-- <td>
				<span e-form="imoform" 
				e-name="area_activity_id" 
				editable-select="partner.area_activity_id" 
				e-placeholder="{{'select'|translate}}"
				e-ng-options="a_t.id as a_t.name for a_t in report.areaActivity"
				e-ng-disabled="!partner.partner_id"
				>
				{{report.displayAreaActivity(report,$data,partner)}}
				</span>

			</td> -->
			<td>
				<span e-form="imoform" 
				e-name="area_id" 
				editable-select="partner.area_id" 
				e-placeholder="{{'select'|translate}}"
				e-ng-options="a_t.id as a_t.name for a_t in report.areaActivity"
				e-ng-disabled="!partner.partner_id"
				>
				{{report.displayAreaActivity(report,$data,partner)}}
				</span>

			</td>
			<!-- <td>
				<span e-form="imoform" 
					e-name="narative_activity_id" 
					editable-select="partner.narative_activity_id" 
					e-placeholder="{{'select'|translate}}"
				 	e-ng-options="a_t.id as a_t.name for a_t in report.areaActivity" 
					e-ng-disabled="!partner.area_activity_id">
							 {{report.displayNarativeActivity(report,$data,partner)}}
				</span>				
			</td> -->
			<td>
				<span e-form="imoform" 
					e-name="product_id" 
					editable-select="partner.product_id" 
					e-placeholder="{{'select'|translate}}"
				 	e-ng-options="a_t.id as a_t.name for a_t in report.products" 
					e-ng-disabled="!partner.narative">
													 {{report.displayProducts(report,$data,partner)}}
				</span>
				
			</td>
			<td>
				<span e-form="imoform" 
					e-name="collab_id" 
					editable-select="partner.collab_id" 
					e-placeholder="{{'select'|translate}}"
					e-ng-options="a_t.id as a_t.name for a_t in report.collab"
					e-ng-disabled="!partner.product_id">
													 {{report.displayCollab(report,$data,partner)}}
				</span>
				
			</td>
			<td>
				<span e-form="imoform" 
					e-name="number_products" 
					editable-number="partner.number_products" 
					e-min="0" 
					e-ng-change="report.updateInputProduct($data,partner);cek($data,$index); ngmCbBeneficiaries.setSadd( beneficiary );">
					{{ partner.number_products }}
				</span>
			</td>
			<!-- End here -->
			<td style="white-space: nowrap" ng-show="report.report.report_status !== 'complete'">
				<!-- form -->
				<form editable-form name="imoform" onshow="report.keydownSaveForm()" ng-show="imoform.$visible"
				 class="form-buttons form-inline" shown="inserted == partner">
					<button type="submit" ng-if="imoform.$visible"
						ng-click="report.saveImoReport(false)" 
						ng-disabled="!report.supportPartnerFormComplete( report.imo_report.support_partner ) || report.imo_report.report_submit"
					 class="btn btn-small waves-effect waves-light save" title="Save">
						<i class="material-icons">save</i>
					</button>
					<div type="button" ng-if="imoform.$visible" ng-disabled="imoform.$waiting" ng-click="imoform.$cancel(); report.cancelEdit( 'support_partner',$partnerIndex );"
					 class="btn btn-small  lighten-1 waves-effect waves-light" title="Cancel Edit"  style="background-color: #be2126">
						<i class="material-icons">clear</i>
					</div>
				</form>
				<div class="buttons" ng-if="!imoform.$visible">
					<button class="btn btn-small waves-effect waves-light" ng-click="imoform.$show();ngmClusterHelperNgWash.init_material_select();"
					ng-disabled="report.imo_report.report_submit"
					 title="Edit">
						<i class="material-icons">create</i>
					</button>
					<button class="btn btn-small red lighten-2 waves-effect waves-light" ng-click="report.removeSupport( $partnerIndex );"
					 title="Remove" ng-disabled="!report.supportPartnerFormComplete( report.imo_report.support_partner ) || report.imo_report.report_submit" style="background-color: #be2126">
						<i class="material-icons">delete</i>
					</button>
				</div>
			</td>
		</tr>
		<!-- <tr>
			<span e-form="imoform" e-name="narative_activity_id" editable-text="partner.narative_activity_id" e-placeholder="{{'select'|translate}}"
			 e-ng-options="a_t.id as a_t.name for a_t in report.areaActivity" e-ng-disabled="!partner.area_activity_id">
				{{report.displayNarativeActivity(report,$data,partner)}}
			</span>
		</tr> -->
		<!-- <tr style="border: 0px">
				<td colspan="100" class=" card" style="padding: 20px">
					<h6 style="font-weight: 600;">Narative *</h6>
					<span editable-text="partner.narative_activity_id" e-name="narative" e-form="imoform" e-ng-disabled="!partner.area_activity_id">
						 {{report.displayNarativeActivityText($data,partner)}}
					</span>
				</td>
		</tr> -->
		<tr style="border: 0px">
			<td colspan="100" class=" card" style="padding: 20px">
				<h6 style="font-weight: 600;">Narative *</h6>
				<span editable-text="partner.narative" e-name="narative" e-form="imoform" e-ng-disabled="!partner.area_id" ng-model="partner.narative">
					{{report.displayNarativeText($data,partner)}}
				</span>
			</td>
		</tr>
		<tr style="height: 15px;"></tr>
		<tr ng-if="partner.file.length">
			<td colspan="100" style="padding-left: 15px;padding-right: 15px;margin-top:10px" class="card">
				<!-- <div class="row">
									<div ng-if="partner.file.length > 0">
										<ul class="collection with-header card">
											<li class="collection-header teal" style="height:80px;">
												<div class="col s12 m10">
													<h4 style="font-size:1.1rem; color: #ffffff">
														<i class="material-icons left" style="">perm_media</i>{{'project_documents'|translate}}
													</h4>
												</div>
											</li>
											<li class="collection-item avatar" dir-paginate="item in partner.file | itemsPerPage: 6" pagination-id="listUpload.id" style="padding-left: 16px">
												<div class="icon">							
													<i class="material-icons" style="color: {{ngmClusterDocument.extentionColor(item.filename_extension)}};text-align: center">
													{{ngmClusterDocument.extentionIcon(item.filename_extension)}}</i> {{item.filename| limitTo: 50}}{{item.filenamelength< 50 ? '' : '...'}}
													<div style="display: inline;padding-left: 220px">{{item.fileowner}}</div>
													<div style="display: inline;padding-left: 50px">{{item.fileowner}}</div>
													<div style="display: inline;padding-left: 50px">{{item.fileowner}}</div>
													<div style="display: inline;padding-left: 50px">{{item.fileowner}}</div>
												</div>
												<div class="secondary-content file-upload">											
													<button data-position="bottom" data-tooltip="{{'preview'|translate}}" class="btn-floating  wave-effect blue watch-detail"
													ng-click="ngmClusterDocument.openPreview('close-preview-file',item.fileid)" ng-disabled="item.filename_extension === '.csv' || report.imo_report.report_submit">
														<i class="small material-icons">compare</i>
													</button>
													<a class="btn-floating  wave-effect watch-detail" data-position="bottom" data-tooltip="{{'download'|translate}}"
													ng-href="{{ngmClusterDocument.setDownloadLink(item.fileid)}}">
														<i class="small material-icons">cloud_download</i>
													</a>
													<button class="btn-floating  wave-effect red watch-detail" data-position="bottom" data-tooltip="{{'delete_mayus1'|translate}}"
													ng-click="ngmClusterDocument.setRemoveId('remove-modal',item.fileid);report.setRemoveRowFile($partnerIndex,item.fileid)">
														<i class="small material-icons">delete</i>
													</button>
												</div>
											</li>
										
											<li class="collection-item avatar" ng-if="!partner.file.length">
												<p style="font-size: 17px; padding:10px 0px 10px 0px;">{{'you_have_no_project_documents_yet'| translate}}</p>
											</li>
											<li class="collection-item avatar" ng-if="partner.file.length > 0" style="padding:25px 10px 20px 10px;">
												<dir-pagination-controls pagination-id="listUpload.id"></dir-pagination-controls>
											</li>
										</ul>
									</div>
								</div> -->
					<table class="responsive-table">
						<thead>
							<tr>
								<th>File</th>
								<th>Owner</th>
								<th>Owner</th>
								<th>Owner</th>
								<th>View</th>
							</tr>
						</thead>
					
						<tbody>
							<tr dir-paginate="item in partner.file | itemsPerPage: 6" pagination-id="tableUpload">
								<td><div class="icon">
									<i class="material-icons" style="color: {{ngmClusterDocument.extentionColor(item.filename_extension)}};text-align: center">
										{{ngmClusterDocument.extentionIcon(item.filename_extension)}}</i> {{item.filename| limitTo: 50}}{{item.filenamelength<
									 50 ? '' : '...'}}</td>
								<td>{{item.filename}}</td>
								<td>{{item.filename}}</td>
								<td>{{item.filename}}</td>
								<td>
									<button data-position="bottom" data-tooltip="{{'preview'|translate}}" class="btn-floating  wave-effect blue watch-detail"
									 ng-click="ngmClusterDocument.openPreview('close-preview-file',item.fileid)" ng-disabled="item.filename_extension === '.csv' || report.imo_report.report_submit">
										<i class="small material-icons">compare</i>
									</button>
									<a class="btn-floating  wave-effect watch-detail" data-position="bottom" data-tooltip="{{'download'|translate}}" ng-href="{{ngmClusterDocument.setDownloadLink(item.fileid)}}">
										<i class="small material-icons">cloud_download</i>
									</a>
									<button class="btn-floating  wave-effect red watch-detail" data-position="bottom" data-tooltip="{{'delete_mayus1'|translate}}"
									 ng-click="ngmClusterDocument.setRemoveId('remove-modal',item.fileid);report.setRemoveRowFile($partnerIndex,item.fileid)">
										<i class="small material-icons">delete</i>
									</button>
								</td>
							</tr>
							<tr ng-if="partner.file.length > 6">
								<td>
									<dir-pagination-controls pagination-id="tableUpload"></dir-pagination-controls>
								</td>
							</tr>
						</tbody>
					</table>
			</td>
		</tr>
		<tr ng-repeat-end>			
			<td colspan="100" ng-if="partner.file.length">
				<div class="row">
					<div class="col s12 m2" dir-paginate="item in partner.file  | itemsPerPage: 6" pagination-id="listUpload.id">
						<div class="card border-radius">
							<div class="card-image waves-effect waves-block waves-light">
								<img class="activator" ng-src={{ngmClusterDocument.setThumbnailfromGdrive(item.fileid)}}>
							</div>
							<div class="card-content">
								<i class="material-icons left" style="color: {{ngmClusterDocument.extentionColor(item.filename_extension)}};margin-right: 5px;">
									{{ngmClusterDocument.extentionIcon(item.filename_extension)}}
								</i>
								<span class="grey-text activator text-darken-4 " style="font-size: 12px; font-weight: 400">{{item.filename| limitTo: 12}}{{item.filenamelength
									< 12 ? '' : '...'}} <i class="material-icons right" style="cursor: pointer; margin-left: 5px;">more_vert</i>
								</span>
							</div>
							<div class="card-reveal">
								<div class=" card-title grey-text text-darken-4">
									<i class="material-icons right" style="font-size: 18px; color: #e2e2e2;margin-top: 5px;margin-right: 5px;">close</i>
								</div>
								<div class="line">
			
									<button class="btn-floating  wave-effect blue tooltipped-report-upload" data-position="bottom" data-tooltip="{{'preview'|translate}}"
									 ng-click="ngmClusterDocument.openPreview('close-preview-file',item.fileid)" ng-disabled="item.filename_extension === '.csv' || report.imo_report.report_submit">
										<i class="small material-icons">compare</i>
									</button>
									<a class="btn-floating  wave-effect space tooltipped-report-upload" data-position="bottom" data-tooltip="{{'download'|translate}}"
									 ng-href="{{ngmClusterDocument.setDownloadLink(item.fileid)}}" ng-disabled="report.imo_report.report_submit">
										<i class="small material-icons">cloud_download</i>
									</a>
									<button ng-disabled="!imoform.$visible" class="btn-floating  wave-effect tooltipped-report-upload red space " data-position="bottom" data-tooltip="{{'delete_mayus1'|translate}}"
									 ng-click="ngmClusterDocument.setRemoveId('remove-modal',item.fileid);report.setRemoveRowFile($partnerIndex,item.fileid)">
										<i class="small material-icons">delete</i>
									</button>
								</div>
							</div>
						</div>
					</div>					
				</div>
				<div class="row">
					<div class="col s12 m2" ng-if="partner.file.length > 6">
						<dir-pagination-controls pagination-id="listUpload.id"></dir-pagination-controls>
					</div>
				</div>				
			</td>
		</tr>
	</table>

	<!-- default -->
	<button  style="background-color: #be2126" class="btn"
	 ng-click="report.addPartner();" ng-disabled="addBeneficiaryDisable || report.imo_report.report_submit">
		<i class="material-icons left">add</i>Add Partner

	</button>

</div>

<br/>
<script>
	// init
	setTimeout(function () { $('.input-field select').material_select(); }, 400);
</script>